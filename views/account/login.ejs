<h1><%- title %></h1>
<%- messages() %>

<div class="account-container" role="region" aria-labelledby="accountFormTitle">
  <h2 id="accountFormTitle" class="sr-only">Login form</h2>

  <form class="account-form" action="/account/login" method="post">
    <div class="form-field">
      <label for="login_email">Email</label>
      <input id="login_email" class="form-control" type="email"
             name="account_email" required autocomplete="email" value="<%= locals.account_email %>">
    </div>

    <div class="form-field">
      <label for="login_password">Password</label>
      <div class="password-field">
        <input id="login_password" class="form-control" type="password"
               name="account_password" required autocomplete="current-password">
        <button type="button"
                class="reveal-button"
                aria-controls="login_password"
                aria-pressed="false">
          Show
        </button>
      </div>
    </div>

    <button class="btn btn-primary" type="submit">Login</button>
  </form>

  <div class="alt-link">
    <p>No account? <a href="/account/registration">Sign up</a></p>
  </div>
</div>

<script>
  // Toggle 
  document.querySelectorAll('.reveal-button').forEach((btn) => {
    const input = document.getElementById(btn.getAttribute('aria-controls'));
    if (!input) return;
    btn.addEventListener('click', () => {
      const isPwd = input.type === 'password';
      input.type = isPwd ? 'text' : 'password';
      btn.setAttribute('aria-pressed', String(isPwd));
      btn.textContent = isPwd ? 'Hide' : 'Show';
    });
  });
</script>
